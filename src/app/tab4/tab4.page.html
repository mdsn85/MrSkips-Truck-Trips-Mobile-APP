<ion-header>
  <ion-toolbar>
    <ion-title>
      Actions
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-list lines="none">
    <ion-item text-center>
      {{ user.Name }} 
    </ion-item>
    <ion-item *ngIf="user.Helpers.length > 0" text-center>
      {{ user.Helpers.length > 0 ? user.Helpers[0].Name : '' }} <button style="background-color:transparent; color: Blue; margin-top: 5px; margin-left: 10px;" *ngIf="user.Helpers.length > 0" item-right clear (click)='refreshUser()'><ion-icon name="sync"></ion-icon></button>
    </ion-item>
    
    <ion-item *ngIf="user.Helpers.length > 1" text-center>
        {{ user.Helpers.length > 1 ? user.Helpers[1].Name : '' }} <button style="background-color:transparent; color: Blue; margin-top: 5px; margin-left: 10px;" *ngIf="user.Helpers.length > 0" item-right clear (click)='refreshUser()'><ion-icon name="sync"></ion-icon></button>
      </ion-item>
    <ion-item text-center>
      {{ user.Vehicle.Name }} <button style="background-color:transparent; color: Blue; margin-top: 5px; margin-left: 10px;" (click)='refreshUser()'><ion-icon name="sync"></ion-icon></button>
    </ion-item>
    <ion-item>
        <ion-grid *ngIf="!startedDuty">
          <ion-row>
            <ion-col size="6">
                <ion-button expand="full" shape="round" type="button" (click)="StartDuty()">Start Duty</ion-button>
            </ion-col>
            <ion-col size="6">
              <ion-button expand="full" shape="round" type="button" (click)="logout()">Logout</ion-button>
            </ion-col>
          </ion-row>
    
        </ion-grid>
        <ion-grid *ngIf="startedDuty">
        <ion-row>
          <ion-col size="6">
              <ion-button expand="full" shape="round" type="button" (click)="StopDuty()">End Duty</ion-button>
          </ion-col>
          <ion-col size="6">
              <ion-button expand="full" shape="round" type="button" (click)="dump = true">Dump</ion-button>
          </ion-col>
        </ion-row>

      </ion-grid>
    </ion-item>
    <ion-item *ngIf="dump">
      <ion-grid>
        <ion-row>
          <ion-col size="6">
            <ion-button expand="full" shape="round" type="button" (click)="Yard()">Yard</ion-button>
          </ion-col>
          <ion-col size="3">
            <ion-button expand="full" shape="round" type="button" (click)="Dump()">Save Dumping</ion-button>
          </ion-col>
          <ion-col size="3">
            <ionic-selectable
              [(ngModel)]="dumpLocation"
              [items]="dumpLocations"
              itemValueField="Id"
              itemTextField="Name"
              [canSearch]="true">
              
              <ng-template ionicSelectablePlaceholderTemplate>
                Select Dump Location
              </ng-template>
            </ionic-selectable>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>

  </ion-list>
</ion-content>
